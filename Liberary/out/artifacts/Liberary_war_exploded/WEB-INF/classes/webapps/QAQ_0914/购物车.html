<!DOCTYPE html>
<html>
  <head>
    <title>购物车</title>
    <meta charset="utf-8" />
    <script src="js/jquery-3.3.1.min.js"></script>
    <style type="text/css">
      h1 {
        text-align:center;
      }
      table {
        margin:0 auto;
        width:60%;
        border:2px solid #aaa;
        border-collapse:collapse;
      }
      table th, table td {
        border:2px solid #aaa;
        padding:5px;
      }
      th {
        background-color:#eee;
      }
    </style>
    
    
    <script type="text/javascript">
    	window.onload = function(){
    		var goods = document.getElementById('goods');
    		console.info(goods);
    	}
    	
    	//实现加入购物车按钮
    	function add_shoppingcart(tbn){
    		//获取按钮的父节点的所有兄弟节点
    		var $tds = $(tbn).parent().siblings();
    		//获取商品名
    		var name = $($tds[0]).html();
//  		console.info(name);
				//获取单价
				var price = $($tds[1]).html();
//				console.info(price);
				//创建购物车中一行的节点
				var $td = $('<tr>'
					          + '<td>' + name + '</td>'
					          + '<td>' + price + '</td>'
					          + '<td align="center">'
					          + 	'<input type="button" value="-"/>'
					          +  	'<input type="text" size="3" readonly value="1"/>'
					          +  	'<input type="button" value="+" onclick="number(this)"/>'
					          + '</td>'
					          + '<td>' + price + '</td>'
					          + '<td align="center"><input type="button" value="x"/></td>'
					        	+'</tr>');
				//将创建好的节点追加到购物车中
				$('#goods').append($td);
    	}
    	
    	//实现数量增加
    	function number(btn){
    		//获取按钮哥哥节点中的内容
    		var num = $(btn).prev().val();
//  		console.info(num);
				//将数量加1后重新写入
				$(btn).prev().val(++num);
				//获取单价
				var price = $(btn).parent().prev().html();
//				console.info(price);
				//获取该商品的总价
				var sum = $(btn).parent().next().html();
				//计算后重新写入
				$(btn).parent().next().html(parseInt(price)+parseInt(sum));
    	}
    	
    </script>
    
    
    
    
  </head>
  <body>
    <h1>真划算</h1>
    <table>
      <tr>
        <th>商品</th>
        <th>单价(元)</th>
        <th>颜色</th>
        <th>库存</th>
        <th>好评率</th>
        <th>操作</th>
      </tr>   
      <tr>
        <td>罗技M185鼠标</td>
        <td>80</td>
        <td>黑色</td>
        <td>893</td>
        <td>98%</td>
        <td align="center">
          <input type="button" value="加入购物车" onclick="add_shoppingcart(this);"/>
        </td>
      </tr>
      <tr>
        <td>微软X470键盘</td>
        <td>150</td>
        <td>黑色</td>
        <td>9028</td>
        <td>96%</td>
        <td align="center">
          <input type="button" value="加入购物车" onclick="add_shoppingcart(this);"/>
        </td>
      </tr>
      <tr>
        <td>洛克iphone6手机壳</td>
        <td>60</td>
        <td>透明</td>
        <td>672</td>
        <td>99%</td>
        <td align="center">
          <input type="button" value="加入购物车" onclick="add_shoppingcart(this);"/>
        </td>
      </tr>
      <tr>
        <td>蓝牙耳机</td>
        <td>100</td>
        <td>蓝色</td>
        <td>8937</td>
        <td>95%</td>
        <td align="center">
          <input type="button" value="加入购物车" onclick="add_shoppingcart(this);"/>
        </td>
      </tr>
      <tr>
        <td>金士顿U盘</td>
        <td>70</td>
        <td>红色</td>
        <td>482</td>
        <td>100%</td>
        <td align="center">
          <input type="button" value="加入购物车" onclick="add_shoppingcart(this);"/>
        </td>
      </tr>
    </table>
  
    <h1>购物车</h1>
    <table>
      <thead>
        <tr>
          <th>商品</th>
          <th>单价(元)</th>
          <th>数量</th>
          <th>金额(元)</th>
          <th>删除</th>
        </tr>
      </thead>
      <tbody id="goods">
        <!--<tr>
          <td>罗技M185鼠标</td>
          <td>80</td>
          <td align="center">
            <input type="button" value="-"/>
            <input type="text" size="3" readonly value="1"/>
            <input type="button" value="+"/>
          </td>
          <td>80</td>
          <td align="center"><input type="button" value="x"/></td>
        </tr>-->
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3" align="right">总计</td>
          <td id="total"></td>
          <td></td>
        </tr>
      </tfoot>
    </table>    
  </body>
</html>